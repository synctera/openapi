components:
  schemas:
    paginated_response:
      title: Paginated List response
      type: object
      properties:
        next_page_token:
          type: string
          description: If returned, use the next_page_token to query for the next page of results. Not returned if there are no more rows.
          example: a8937a0d

    error:
      title: Standard error response (RFC 7807 problem report)
      description: >-
        Synctera error responses in API v0 follow [RFC 7807](https://datatracker.ietf.org/doc/html/rfc7807).
        Following that standard, the field for a machine-readable "error code" in API v0 is `type`.

        In our future API v1, we are phasing out RFC 7807 and adopting a custom error format.
        That format will be documented in our API v1 spec.
        But you may see some v0 error responses with a machine-readable `code` field
        while we are making the transition from v0 to v1.
      type: object
      # When all of our error responses use this format, then we can specify
      # the required fields here. Until then, it would just cause test failures
      # to do so, because legacy error responses do not fit this schema.
      properties:
        type:
          type: string
          description: >
            A machine-readable string that identifies the error for programmatic use.
            This is a URI, i.e. a globally unique identifier.
            It is _not_ necessarily a URL, so do not expect it to resolve to a web page.
            You can use this whole string as an error code, or just everything after the last slash.

            This field will be removed in API v1.
          example: "https://dev.synctera.com/errors/bad-request-body"
        status:
          type: integer
          description: the HTTP status code for this response
          example: 400
        title:
          type: string
          description: >
            A human-readable string for this general category of error, which corresponds
            1-to-1 with error types (`title` is the human-readable version of `type`).
            There can be multiple distinct titles for the same HTTP status code, and
            the same `title` can result in many different `detail` strings.

            This field will be removed in API v1.
          example: "Bad Request Body"
        detail:
          type: string
          description: >
            A human-readable string explaining this particular error.
          example: "missing required fields: first_name, dob"
        code:
          type: string
          description: >-
            An optional “sneak preview” of our future API v1 error responses.
            This is provided to give integrators a chance to work with our future error codes.
            Error codes for the same error may change between v0 and v1.
          example: BAD_REQUEST_BODY

    delete_response:
      title:  Deleted Object
      type: object
      description: Deleted object information
      properties:
        id:
          type: string
          format: uuid
          description: Object ID
        resource:
          type: string
          description: The resource name

    vendor_info:
      title:  Vendor Info
      type: object
      description: >
        The information provided to Synctera from the vendor.
        Interpretation of this object is up to the client.
      discriminator:
        propertyName: content_type
        mapping:
          "application/json": "#/components/schemas/vendor_json"
          "text/xml": "#/components/schemas/vendor_xml"
      oneOf:
        - $ref: "#/components/schemas/vendor_json"
        - $ref: "#/components/schemas/vendor_xml"

    vendor_json:
      properties:
        vendor:
          type: string
          example: SOCURE
        content_type:
          type: string
          description: Describes the content-type encoding received from the vendor
          enum:
            - "application/json"
        json:
          type: object
          description: Data representation in JSON
      required:
        - vendor
        - content_type
        - json

    vendor_xml:
      properties:
        vendor:
          type: string
          example: IDOLOGY
        content_type:
          type: string
          description: Describes the content-type encoding received from the vendor
          enum:
            - "text/xml"
        xml:
          type: string
          description: Data representaion in XML
      required:
        - vendor
        - content_type
        - xml

    metadata:
      description: >
        Optional field to store additional information about the resource.
        Intended to be used by the integrator to store non-sensitive data.
      type: object

    tenant:
      title: Tenant
      type: object
      properties:
        bank_id:
          description: Bank ID
          type: integer
          example: 6
        partner_id:
          description: Partner ID
          type: integer
          example: 6
      required:
        - bank_id
        - partner_id

    tenant_id:
      description: |
        The id of the tenant containing the resource.
      type: string
      example: 'abcdef_ghijkl'

    tenant_id_internal:
      x-external: false
      description: |
        The id of the tenant containing the resource. Not included in external documentation.
      type: string
      example: 'abcdef_ghijkl'

    workspace_resources_post:
      title: Request for creating workspace resources
      type: object
      properties:
        tenant:
          description: The tenant whose resources are being created as part of this quickstart request.
          allOf:
            - $ref: '#/components/schemas/tenant'
        parent_tenant:
          description: >
            If `tenant` is a fintech, this is the sponsor bank's self-partner tenant.
            If `tenant` is a bank, this is Synctera (1_1).
          allOf:
            - $ref: '#/components/schemas/tenant'
        bank_self_partner_tenant:
          description: >
            If `tenant` is a fintech, this is the sponsor bank's self-partner tenant.
            If `tenant` is a bank, this is the same as `tenant`.
          deprecated: true
          allOf:
            - $ref: '#/components/schemas/tenant'
        is_tminus10:
          description: |
            Flag which indicates if the workspace is a t-minus10 workspace.
            Some services may create different resources depending on this flag.
          type: boolean
        partner_type:
          $ref: '#/components/schemas/partner_type'
      required:
        - tenant
        - is_tminus10
        - partner_type

    sample_resources_post:
      title: Request for creating sample resources
      type: object
      properties:
        tenant:
          $ref: '#/components/schemas/tenant'
      required:
        - tenant

    workspace_wipe_post:
      title: Request for wiping a workspace
      type: object
      properties:
        tenant:
          $ref: '#/components/schemas/tenant'
      required:
        - tenant

    vendor_config_status:
      type: string
      description: Status of vendor configuration
      enum:
        - NOT_CONTRACTED
        - NOT_CONFIGURED
        - MISCONFIGURED
        - OK

    partner_type:
      type: string
      enum:
        - BANK_SELF_PARTNER
        - FINTECH
        - VENDOR
      description: |
        Type of partner. One of the following:
        * `BANK_SELF_PARTNER` - The partner aspect of a bank tenant.
        * `FINTECH` - A fintech partnered with a bank.
        * `VENDOR` - A vendor providing services to the Synctera platform.
